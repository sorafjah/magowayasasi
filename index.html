<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£Ÿäº‹ãƒã‚§ãƒƒã‚¯</title>
    <link rel="apple-touch-icon" href="magowayasasi.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            -webkit-tap-highlight-color: transparent; /* ã‚¹ãƒãƒ›ã§ã®ã‚¿ãƒƒãƒ—æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ç„¡åŠ¹åŒ– */
        }
        .check-box {
            transition: all 0.2s ease-in-out;
        }
        .check-box.checked {
            background-color: #fde68a; /* amber-200 */
            color: #374151; /* gray-700 */
            box-shadow: none;
        }
    </style>
</head>
<body class="bg-white flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md mx-auto bg-amber-50 rounded-2xl shadow-lg p-6 md:p-8">
        
        <!-- é€±ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="flex items-center justify-between mb-6">
            <button id="prev-week" class="transition-colors p-2">
                <i class="fas fa-chevron-left fa-fw text-2xl text-gray-500 hover:text-gray-800"></i>
            </button>
            <h2 id="week-display" class="text-xl font-semibold text-gray-700 tracking-wider"></h2>
            <button id="next-week" class="transition-colors p-2">
                <i class="fas fa-chevron-right fa-fw text-2xl text-gray-500 hover:text-gray-800"></i>
            </button>
        </div>

        <!-- ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ -->
        <div id="checklist" class="space-y-3">
            <!-- JavaScriptã§é …ç›®ãŒã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
        </div>
        
        <!-- æ‘‚å–ç›®å®‰é‡ -->
        <div class="mt-8 border-t border-amber-200 pt-6">
            <h3 class="text-lg font-bold text-center text-gray-800 mb-4">1é€±é–“ã‚ãŸã‚Šã®ã‚ã‚„ã™é‡ï¼ˆæˆäººï¼‰</h3>
            <div class="space-y-4 text-sm text-gray-700">
                <div>
                    <h4 class="font-semibold text-gray-800">â‘  è±†é¡ï¼ˆå¤§è±†è£½å“ãƒ»è±†ï¼‰</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šè±†è…1/3ä¸ã€ç´è±†1ãƒ‘ãƒƒã‚¯ã€ç…®è±†å°é‰¢ãªã©</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥50ã€œ100gï¼ˆã‚†ã§å¤§è±†æ›ç®—ã§ç´„1/2ã‚«ãƒƒãƒ—ï¼‰ã€é€±ã« 350ã€œ700g ç¨‹åº¦</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800">â‘¡ ã”ã¾ï¼ˆç¨®å®Ÿé¡ï¼šã”ã¾ãƒ»ãƒŠãƒƒãƒ„ï¼‰</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šã”ã¾å¤§ã•ã˜1ã€œ2ã€ã‚¢ãƒ¼ãƒ¢ãƒ³ãƒ‰5ã€œ10ç²’</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥10ã€œ20gã€é€±ã« 70ã€œ140g ç¨‹åº¦</p>
                </div>
                 <div>
                    <h4 class="font-semibold text-gray-800">â‘¢ æµ·è—»</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šã‚ã‹ã‚ã®å‘³å™Œæ±ã€ã²ã˜ãç…®ã€å°é‰¢1å“ç¨‹åº¦</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥5ã€œ10gï¼ˆä¹¾ç‰©æ›ç®—ï¼‰ã€é€±ã« 35ã€œ70gï¼ˆä¹¾ç‰©ï¼‰ï¼ˆæ°´ã§æˆ»ã™ã¨ç´„5ã€œ10å€ã«ãªã‚‹ï¼‰</p>
                </div>
                 <div>
                    <h4 class="font-semibold text-gray-800">â‘£ é‡èœ</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šç”Ÿé‡èœã‚µãƒ©ãƒ€1çš¿ï¼‹ç…®ç‰©ã‚„ãŠæµ¸ã—2çš¿ãã‚‰ã„</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥350gä»¥ä¸Šï¼ˆã†ã¡ç·‘é»„è‰²é‡èœ120gä»¥ä¸Šï¼‰ã€é€±ã« 2,450gï¼ˆ2.5kgç¨‹åº¦ï¼‰</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800">â‘¤ é­šé¡</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šåˆ‡ã‚Šèº«1åˆ‡ã‚Œï¼ˆ80gï¼‰ã€åˆºèº«å°é‰¢</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥60ã€œ100gç¨‹åº¦ï¼ˆè‚‰ã¨äº¤äº’ã§OKï¼‰ã€é€±ã« 420ã€œ700g ç¨‹åº¦ï¼ˆåšåŠ´çœã¯ã€Œé­šã‚’é€±2å›ä»¥ä¸Šã€ã¨æ¨å¥¨ï¼‰</p>
                </div>
                 <div>
                    <h4 class="font-semibold text-gray-800">â‘¥ ãã®ã“é¡</h4>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">ä¾‹ï¼šã—ã„ãŸã‘2æšã€ã—ã‚ã˜1/2ãƒ‘ãƒƒã‚¯</p>
                    <p class="ml-4 pl-2 border-l-2 border-amber-200">1æ—¥50ã€œ70gã€é€±ã« 350ã€œ500g ç¨‹åº¦</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const weekDisplay = document.getElementById('week-display');
            const checklistContainer = document.getElementById('checklist');
            const prevWeekBtn = document.getElementById('prev-week');
            const nextWeekBtn = document.getElementById('next-week');

            let currentDate = new Date();
            let appData = {};

            const foodCategories = [
                { id: 'mame', name: 'ã¾ã‚', emoji: 'ğŸ«˜' },
                { id: 'goma', name: 'ã”ã¾ãƒŠãƒƒãƒ„', emoji: 'ğŸ¥œ' },
                { id: 'kaiso', name: 'ã‹ã„ãã†', emoji: 'ğŸŒ¿' },
                { id: 'yasai', name: 'ã‚„ã•ã„', emoji: 'ğŸ¥¬' },
                { id: 'sakana', name: 'ã•ã‹ãª', emoji: 'ğŸŸ' },
                { id: 'kinoko', name: 'ãã®ã“', emoji: 'ğŸ„' },
            ];

            // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
            function loadData() {
                const savedData = localStorage.getItem('mealCheckDataV4');
                appData = savedData ? JSON.parse(savedData) : {};
            }

            // ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
            function saveData() {
                localStorage.setItem('mealCheckDataV4', JSON.stringify(appData));
            }

            // é€±ã®ã‚­ãƒ¼ã‚’å–å¾— (ä¾‹: "2023-37")
            function getWeekKey(date) {
                const d = new Date(date);
                d.setHours(0, 0, 0, 0);
                d.setDate(d.getDate() + 4 - (d.getDay() || 7));
                const yearStart = new Date(d.getFullYear(), 0, 1);
                const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
                return `${d.getFullYear()}-${weekNo}`;
            }
            
            // é€±ã®é–‹å§‹æ—¥ã¨çµ‚äº†æ—¥ã‚’å–å¾—
            function getWeekDateRange(date) {
                const d = new Date(date);
                const day = d.getDay();
                const diffStart = d.getDate() - day + (day === 0 ? -6 : 1); // æœˆæ›œå§‹ã¾ã‚Š
                const startDate = new Date(d.setDate(diffStart));
                const endDate = new Date(new Date(startDate).setDate(startDate.getDate() + 6));
                return { startDate, endDate };
            }

            // UIã®æç”»
            function render() {
                const { startDate, endDate } = getWeekDateRange(currentDate);
                const format = (dt) => `${dt.getMonth() + 1}/${dt.getDate()}`;
                weekDisplay.textContent = `${format(startDate)} ~ ${format(endDate)}`;

                const weekKey = getWeekKey(currentDate);
                if (!appData[weekKey]) {
                    appData[weekKey] = {};
                    foodCategories.forEach(cat => {
                        appData[weekKey][cat.id] = [false, false];
                    });
                }
                const weekData = appData[weekKey];

                checklistContainer.innerHTML = '';
                foodCategories.forEach(category => {
                    const row = document.createElement('div');
                    row.className = 'flex justify-between items-center gap-3';

                    for (let i = 0; i < 2; i++) {
                        const checkBox = document.createElement('div');
                        checkBox.className = 'check-box relative w-full h-14 flex items-center justify-center text-center text-md font-semibold text-gray-700 bg-white rounded-lg shadow cursor-pointer transform hover:scale-105';
                        checkBox.dataset.category = category.id;
                        checkBox.dataset.index = i;
                        
                        const isChecked = weekData[category.id] && weekData[category.id][i];
                        
                        checkBox.innerHTML = `<span class="flex-grow text-center">${category.emoji} ${category.name}</span>`;
                        if (isChecked) {
                            checkBox.classList.add('checked');
                        }
                        row.appendChild(checkBox);
                    }
                    checklistContainer.appendChild(row);
                });
            }

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            prevWeekBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() - 7);
                render();
            });

            nextWeekBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() + 7);
                render();
            });

            checklistContainer.addEventListener('click', (e) => {
                const checkBox = e.target.closest('.check-box');
                if (checkBox) {
                    const category = checkBox.dataset.category;
                    const index = parseInt(checkBox.dataset.index, 10);
                    const weekKey = getWeekKey(currentDate);
                    
                    // çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«
                    appData[weekKey][category][index] = !appData[weekKey][category][index];
                    const isChecked = appData[weekKey][category][index];

                    // UIã‚’æ›´æ–°
                    checkBox.classList.toggle('checked', isChecked);
                    
                    saveData();
                }
            });

            // åˆæœŸåŒ–
            loadData();
            render();
        });
    </script>
</body>
</html>



